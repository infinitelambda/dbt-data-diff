models:
  - name: data_diff_check_summary
    description: |
      Result of the **Data Content** diff failure only, aggregated by columns.

      - ðŸŸ¢ GOOD: No data, Or Has data and the `match_percentage` can be well-explained e.g. new columns, behavior changes
      - ðŸ”´ BAD: Has data and `match_percentage` cannot be explained

      It will also link to the addtional result tables,
      formatted as `data_diff_check_detail_{source_table}_{YYYYMMDD}`,
      which is the result of EXCEPT operator contains all the different rows,
      the structure will be the same as the compared objects

      NOTE: the additional result table(s) will be replaced if there is an existing one

    columns:
      - name: src_db
        description: Database name of the source object to be compared
      - name: src_schema
        description: Schema name of the source object to be compared
      - name: src_table
        description: Source object name to be compared
      - name: trg_db
        description: Database name of the target object to be compared
      - name: trg_schema
        description: Schema name of the target object to be compared
      - name: trg_table
        description: Target object to be compared
      - name: column_name
        description: Name of the compared column
      - name: match_percentage
        description: |
          Percentage data matching of the compared columns within the Diff Result (*).

          (*) = different_in_source(Source - Target) + different_in_target(Target - Source)

          Note: that this % is calculated by count(matched, in a column) / count(diff dataset).

          For example, the Diff result of TableA is having 10 diff rows:
          - 4 rows different_in_source
          - 6 rows different_in_target

          then, for each column:
          - Column1: count(matched) = 10  --> match% = 1    --> there is no diff in this column
          - Column2: count(matched) = 5   --> match% = 0.5  --> we have data diff in Column2 in 5 (out of 10) diff rows above
          - Column3: count(matched) = 0   --> match% = 0    --> we have a critical data diff in Column3

      - name: last_data_diff_timestamp
        description: Last data-diff run timestamp
      - name: diff_run_id
        description: Data diff's Run ID
